import{a as M}from"./chunk-GEQVTXWT.js";import{a as F,b as u,c as C,d as I,e as E,f as _,g as y,h as B,i as U,j as D,k as N}from"./chunk-4KOJQGT5.js";import{B as g,F as m,G as t,H as e,I as a,K as v,L as c,N as i,P as p,a as b,ba as h,da as x,ia as k,ka as S,u as l,w as d,x as f}from"./chunk-NMFEY4RC.js";function R(n,r){if(n&1&&(t(0,"div",23),i(1),e()),n&2){let o=c();l(),p(" ",o.errorMessage," ")}}function q(n,r){if(n&1&&(t(0,"div",24),i(1),e()),n&2){let o=c();l(),p(" ",o.successMessage," ")}}var O=class n{constructor(r,o,s,P){this.fb=r;this.bookService=o;this.route=s;this.router=P;this.updateForm=this.fb.group({title:["",u.required],author:["",u.required],publishedDate:["",u.required],imageUrl:[""]})}updateForm;bookId;errorMessage="";successMessage="";ngOnInit(){this.bookId=+this.route.snapshot.paramMap.get("id"),this.bookService.getBook(this.bookId).subscribe({next:r=>{this.updateForm.patchValue({title:r.title,author:r.author,publishedDate:r.publishedDate?.substring(0,10),imageUrl:r.imageUrl})},error:r=>{console.error(r),this.errorMessage="Could not load the book."}})}onSubmit(){if(this.updateForm.valid){let r=b({id:this.bookId},this.updateForm.value);this.bookService.updateBook(this.bookId,r).subscribe({next:()=>{this.successMessage="Book updated successfully!",this.errorMessage="",setTimeout(()=>this.router.navigate(["/books"]),1500)},error:o=>{console.error(o),this.errorMessage="Failed to update book.",this.successMessage=""}})}else this.errorMessage="Please fill in all required fields.",this.successMessage=""}static \u0275fac=function(o){return new(o||n)(d(U),d(M),d(k),d(S))};static \u0275cmp=f({type:n,selectors:[["app-update-form"]],decls:39,vars:3,consts:[[1,"container","mt-5"],[1,"card","update-card","mx-auto","p-4","shadow"],[1,"text-center","mb-3"],[1,"text-center","update-subtext","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","title",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-book"],["id","title","formControlName","title","type","text","placeholder","Enter book title","required","",1,"form-control"],["for","author",1,"form-label"],[1,"fas","fa-user-edit"],["id","author","formControlName","author","type","text","placeholder","Author name","required","",1,"form-control"],["for","publishedDate",1,"form-label"],[1,"fas","fa-calendar"],["id","publishedDate","formControlName","publishedDate","type","date","required","",1,"form-control"],["for","imageUrl",1,"form-label"],[1,"fas","fa-image"],["id","imageUrl","formControlName","imageUrl","type","text","placeholder","optional: https://example.com/image.jpg",1,"form-control"],["type","submit",1,"btn","update-submit-btn","w-100"],["class","alert alert-danger mt-3 text-center",4,"ngIf"],["class","alert alert-success mt-3 text-center",4,"ngIf"],[1,"alert","alert-danger","mt-3","text-center"],[1,"alert","alert-success","mt-3","text-center"]],template:function(o,s){o&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"Update Book"),e(),t(4,"p",3),i(5,"Edit the details of your book."),e(),t(6,"form",4),v("ngSubmit",function(){return s.onSubmit()}),t(7,"div",5)(8,"label",6),i(9,"Title"),e(),t(10,"div",7)(11,"span",8),a(12,"i",9),e(),a(13,"input",10),e()(),t(14,"div",5)(15,"label",11),i(16,"Author"),e(),t(17,"div",7)(18,"span",8),a(19,"i",12),e(),a(20,"input",13),e()(),t(21,"div",5)(22,"label",14),i(23,"Published Date"),e(),t(24,"div",7)(25,"span",8),a(26,"i",15),e(),a(27,"input",16),e()(),t(28,"div",5)(29,"label",17),i(30,"Image URL"),e(),t(31,"div",7)(32,"span",8),a(33,"i",18),e(),a(34,"input",19),e()(),t(35,"button",20),i(36,"Save Changes"),e(),g(37,R,2,1,"div",21)(38,q,2,1,"div",22),e()()()),o&2&&(l(6),m("formGroup",s.updateForm),l(31),m("ngIf",s.errorMessage),l(),m("ngIf",s.successMessage))},dependencies:[N,E,F,C,I,B,_,y,D,x,h],styles:[".update-card[_ngcontent-%COMP%]{max-width:500px;background-color:var(--bg);color:var(--text);border:1px solid var(--card-border);border-radius:.5rem;transition:background-color .2s,color .2s,border-color .2s}.update-subtext[_ngcontent-%COMP%]{color:var(--meta-text)}.input-group-text[_ngcontent-%COMP%]{background-color:var(--btn-bg);color:var(--btn-icon-color);border:1px solid var(--btn-border);transition:background-color .2s,color .2s}input.form-control[_ngcontent-%COMP%]{background-color:var(--bg);color:var(--text);border:1px solid var(--btn-border)}input.form-control[_ngcontent-%COMP%]::placeholder{color:var(--meta-text)}.update-submit-btn[_ngcontent-%COMP%]{background-color:var(--btn-border);color:var(--bg);border:none;transition:background-color .2s}.update-submit-btn[_ngcontent-%COMP%]:hover{background-color:var(--hover);color:var(--bg)}"]})};export{O as UpdateForm};
